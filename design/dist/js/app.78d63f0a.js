(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},s=[];function o(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"2881ba93"}[t]+".js"}function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=a[t]=[e,i]}));e.push(n[2]=i);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",l.name="ChunkLoadError",l.type=i,l.request=s,n[1](l)}a[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"089c":function(t,e,n){},"0e21":function(t,e,n){},1:function(t,e){},"13ca":function(t,e,n){"use strict";n("0e21")},1826:function(t,e,n){},"196a":function(t,e,n){},"1eb3":function(t,e,n){"use strict";n("bff9")},2345:function(t,e,n){"use strict";n("fccf")},2599:function(t,e,n){"use strict";n("9bd0")},"2a51":function(t,e,n){},"2fca":function(t,e,n){},3100:function(t,e,n){},"31bf":function(t,e,n){"use strict";n("418c")},"340f":function(t,e,n){},"35ce":function(t,e,n){},"37e3":function(t,e,n){},"3b04":function(t,e,n){"use strict";n("35ce")},"418c":function(t,e,n){},4204:function(t,e,n){t.exports=n.p+"img/no-img.3679ff87.svg"},"42ec":function(t,e,n){"use strict";n("54a4")},"433d":function(t,e,n){"use strict";n("196a")},"472a":function(t,e,n){},"4f29":function(t,e,n){"use strict";n("3100")},"4fbb":function(t,e,n){},5109:function(t,e,n){},"54a4":function(t,e,n){},"55ad":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o=n("2877"),r={},c=Object(o["a"])(r,a,s,!1,null,null,null),l=c.exports,u=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("fp-design")],1)},d=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-design-container"},[n("fp-header"),n("fp-aside"),n("fp-aside-extend",{staticClass:"noselect"},[3===t.activeId?n("fp-aside-panel-component"):t._e(),2===t.activeId?n("fp-aside-material"):t._e(),4===t.activeId?n("fp-aside-panel-layer"):t._e(),5===t.activeId?n("fp-aside-panel-poster"):t._e()],1),n("fp-main-container"),n("fp-setting-container"),n("fp-debug-panel"),n("fp-login"),n("fp-change-pwd"),n("fp-token-manager"),n("fp-user-manager"),n("fp-code-container")],1)},m=[],h=n("5530"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-header-container"},[t._m(0),n("div",{staticClass:"fp-header-button-container"},[n("el-tooltip",{attrs:{content:"新建",placement:"bottom"}},[n("fp-button",{on:{click:t.create}},[t._v("新建")])],1),n("el-tooltip",{attrs:{content:"生成代码",placement:"bottom"}},[n("fp-button",{on:{click:function(e){t.editor.showCode=!0}}},[t._v("代码")])],1),n("el-divider",{attrs:{direction:"vertical"}}),n("el-tooltip",{attrs:{content:"撤销",placement:"bottom"}},[n("fp-button",{attrs:{disabled:!t.canUndo},on:{click:t.undo}},[n("i",{staticClass:"iconfont icon-chexiao"})])],1),n("el-tooltip",{attrs:{content:"重做",placement:"bottom"}},[n("fp-button",{attrs:{disabled:!t.canRedo},on:{click:t.redo}},[n("i",{staticClass:"iconfont icon-zhongzuo"})])],1),n("el-tooltip",{attrs:{content:"保存",placement:"bottom"}},[n("fp-button",{on:{click:t.save}},[n("i",{staticClass:"iconfont icon-baocun"})])],1),n("el-tooltip",{attrs:{content:"预览",placement:"bottom"}},[n("fp-button",{on:{click:t.preview}},[n("i",{staticClass:"iconfont icon-yulan"})])],1),n("el-tooltip",{attrs:{content:"下载",placement:"bottom"}},[n("fp-button",{on:{click:t.download}},[n("i",{staticClass:"iconfont icon-xiazai1"})])],1)],1),n("div",{staticClass:"fp-header-button-container-right"},[n("fp-header-user-info")],1),t._m(1),n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!1},expression:"{movable: false}"}],ref:"imgViewer"},[n("img",{ref:"previewImg",staticStyle:{width:"1px",height:"0"}})])])},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-logo"},[n("a",{attrs:{href:"/"}},[t._v("fastposter 专业版")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-header-button-container-right github"},[n("a",{attrs:{href:"https://github.com/psoho/fast-poster",target:"_blank",title:"https://github.com/"}},[n("i",{staticClass:"iconfont icon-github"})]),n("a",{attrs:{href:"https://gitee.com/psoho/fast-poster",target:"_blank",title:"https://gitee.com/"}},[n("i",{staticClass:"iconfont icon-gitee",staticStyle:{color:"#C71D23"}})])])}],g=(n("2b3d"),n("9861"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-button",{staticClass:"fp-btn is-plain",attrs:{size:t.size,type:"info",plain:"",disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)}),w=[],y={name:"FpButton",props:{disabled:{type:Boolean,default:!1},size:{type:String,default:"small"}}},x=y,k=(n("c99f"),Object(o["a"])(x,g,w,!1,null,"7b8e8fc8",null)),_=k.exports,C=n("aeb1"),O=n.n(C),j=n("2f62"),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{placement:"top","popper-class":"user-info-popover",trigger:"click"}},[n("div",{staticClass:"user-info-container"},[n("div",{staticClass:"user-info"},[n("h3",[t._v("账号")]),n("span",[t._v(t._s(t.user.username))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"user-info-item",on:{click:function(e){t.editor.showChangePwd=!0}}},[n("i",{staticClass:"iconfont icon-xiugaimima1"}),n("span",{staticClass:"title"},[t._v("修改密码")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"user-info-item",on:{click:function(e){t.editor.showTokenManager=!0}}},[n("i",{staticClass:"iconfont icon-shouquan"}),n("span",{staticClass:"title"},[t._v("凭证管理")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin&&2===t.user.type,expression:"isLogin && user.type === 2"}],staticClass:"user-info-item",on:{click:function(e){t.editor.showUserManager=!0}}},[n("i",{staticClass:"iconfont icon-yonghuguanli"}),n("span",{staticClass:"title"},[t._v("用户管理")])]),n("div",{staticClass:"el-divider el-divider--horizontal",staticStyle:{margin:"8px 0"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"user-info-item",on:{click:t.tologout}},[n("i",{staticClass:"iconfont icon-logout"}),n("span",{staticClass:"title"},[t._v("退出账户")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}],staticClass:"user-info-item",on:{click:function(e){t.editor.showLogin=!0}}},[n("i",{staticClass:"iconfont icon-login"}),n("span",{staticClass:"title"},[t._v("快速登录")])])]),n("el-avatar",{staticStyle:{cursor:"pointer","margin-top":"4px"},attrs:{slot:"reference",size:"medium",icon:"el-icon-user-solid"},slot:"reference"})],1)},S=[],P={name:"FpHeaderUserInfo",computed:Object(h["a"])(Object(h["a"])({},Object(j["c"])({isLogin:"editor/isLogin"})),Object(j["e"])({user:function(t){return t.editor.user},editor:function(t){return t.editor}})),methods:Object(h["a"])(Object(h["a"])({},Object(j["b"])({logout:"editor/logout"})),{},{tologout:function(){this.logout().then((function(){}))}})},I=P,$=(n("79b1"),n("b14c"),Object(o["a"])(I,F,S,!1,null,"4c1dac08",null)),E=$.exports,U={name:"FpDesignHeader",components:{FpHeaderUserInfo:E,FpButton:_},comments:{FpButton:_},computed:Object(h["a"])(Object(h["a"])({},Object(j["e"])({p:function(t){return t.poster.p},editor:function(t){return t.editor}})),Object(j["c"])({canUndo:"snapshots/canUndo",canRedo:"snapshots/canRedo"})),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(j["b"])({savePoster:"poster/savePoster",createPoster:"poster/createPoster",previewPoster:"poster/previewPoster",loadPosters:"panelposter/getItems"})),Object(j["d"])({undo:"snapshots/undo",redo:"snapshots/redo",clear:"snapshots/clear"})),{},{create:function(){var t=this;this.$confirm("确定要新建海报么?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.clear(),t.createPoster()}))},save:function(){var t=this;this.savePoster().then((function(e){t.$message({message:"保存成功",type:"success",duration:1e3}),t.loadPosters()}))},preview:function(){var t=this,e=this.$refs["previewImg"];this.previewPoster().then((function(n){e.src=window.URL.createObjectURL(n),e.onload=function(){return t.$refs["imgViewer"].$viewer.show()}}))},download:function(){var t=this;this.previewPoster().then((function(e){O()(e,t.p.name+"."+t.p.type,"","image/png")}))}})},T=U,A=(n("afb8"),Object(o["a"])(T,v,b,!1,null,"0270f506",null)),z=A.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-aside-container"},[n("div",{staticClass:"fp-aside-body"},t._l(t.items,(function(e){return n("fp-aside-button",{key:e.id,attrs:{activated:e.activated,icon:e.icon,text:e.text,type:e.type,link:e.link,id:e.id,extend:e.extend},on:{"update:activated":function(n){return t.$set(e,"activated",n)},changeState:function(n){return t.changeState(e)}}})})),1)])},N=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"link"===t.type?n("a",{staticClass:"fp-aside-btn",class:{activated:t.activated},attrs:{href:t.link,target:"_blank"}},[n("i",{staticClass:"iconfont",class:["icon-"+t.icon]}),t._v(" "+t._s(t.text)+" ")]):"button"===t.type?n("button",{staticClass:"fp-aside-btn",class:{activated:t.activated},on:{click:t.clickHandler}},[n("i",{staticClass:"iconfont",class:["icon-"+t.icon]}),t._v(" "+t._s(t.text)+" ")]):t._e()},R=[],H=(n("a9e3"),{name:"FpAsideButton",props:{id:{type:Number,default:0},activated:{type:Boolean,default:!1},extend:{type:Boolean,default:!1},icon:{type:String,default:"zujian"},text:{type:String,default:""},type:{type:String,default:"button"},link:{type:String,default:"/"}},methods:{clickHandler:function(){var t=!this.activated;this.$emit("update:activated",t),this.$emit("changeState")}}}),B=H,M=(n("d4a4"),Object(o["a"])(B,L,R,!1,null,"7c01c181",null)),q=M.exports,J={name:"FpAside",components:{FpAsideButton:q},computed:Object(h["a"])({},Object(j["e"])({items:function(t){return t.aside.items},activeId:function(t){return t.aside.activeId}})),created:function(){this.getItems()},methods:Object(h["a"])(Object(h["a"])({},Object(j["b"])({getItems:"aside/getItems",setActiveItem:"aside/setActiveItem",setDebug:"editor/setDebug"})),{},{changeState:function(t){"debug"===t.icon&&this.setDebug(!0),t.extend&&this.setActiveItem(t)}})},W=J,K=(n("67da"),Object(o["a"])(W,D,N,!1,null,"92048244",null)),X=K.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-aside-extend-container",class:{"fp-extended":t.isActived}},[n("div",{staticClass:"fp-aside-extend-panel"},[t._t("default")],2),n("div",{staticClass:"fp-aside-extend-close",class:{"fp-extended-btn":t.isActived},on:{click:function(e){return t.setActiveItem({id:0,activated:!1,extend:!0})}}},[n("i",{staticClass:"btn-close"})])])},G=[],Z={name:"FpAsideExtend",computed:Object(h["a"])({},Object(j["c"])({isActived:"aside/isActived"})),methods:Object(h["a"])({},Object(j["b"])({setActiveItem:"aside/setActiveItem"}))},V=Z,Q=(n("eb43"),Object(o["a"])(V,Y,G,!1,null,"27fb45f4",null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-main-container",class:{"fp-collapse":t.AsideIsActived}},[n("fp-design-editor"),n("fp-editor-bottom-bar")],1)},nt=[],it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-design-editor",on:{mousedown:t.setUnActiveAllItem}},[n("div",{staticClass:"fp-editor-container"},[n("fp-poster")],1)])},at=[],st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-editor-wrapper",style:{width:t.wpx,height:t.hpx}},[n("div",{staticClass:"fp-poster",style:{width:t.wpx,height:t.hpx,"background-color":t.p.bgc,"background-size":t.wpx+" "+t.hpx,"background-image":t.bgUrl?"url("+t.bgUrl+")":""},attrs:{tabindex:"1"},on:{keydown:function(e){return t.keydownHandler(e)}}},t._l(t.p.items,(function(t){return n("fp-poster-item",{key:t.uuid,attrs:{item:t}})})),1)])},ot=[],rt=(n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fp-drag",{attrs:{meta:t.item,x:t.item.x,y:t.item.y,scale:t.scale,"parent-width":t.W,"parent-height":t.H},on:{dragging:t.dragging,dragstop:t.dragstop,active:t.setActiveItemId}},["text"===t.item.t?n("fp-item-text",{attrs:{item:t.item}}):t._e(),"image"===t.item.t?n("fp-item-image",{attrs:{item:t.item}}):t._e(),"avatar"===t.item.t?n("fp-item-avatar",{attrs:{item:t.item}}):t._e(),"qrcode"===t.item.t||"sqrcode"===t.item.t?n("fp-item-qrcode",{attrs:{item:t.item}}):t._e()],1)}),ct=[],lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-drag",class:{active:t.meta.active,inactive:!t.meta.active,lock:t.meta.lock},style:t.positionStyle,on:{mousedown:function(e){return t.bodyDown(e)},touchstart:function(e){return t.bodyDown(e)},touchend:function(e){return t.up(e)}}},[n("div",{ref:"container",staticClass:"content-container",style:t.sizeStyle},[t._t("default")],2),t._l(t.sticks,(function(e){return n("div",{key:e,staticClass:"fp-drag-stick",class:["fp-drag-stick-"+e,t.isResizable?"":"not-resizable"],style:t.fpDragStick(e),on:{mousedown:function(n){return n.stopPropagation(),n.preventDefault(),t.stickDown(e,n)},touchstart:function(n){return n.stopPropagation(),n.preventDefault(),t.stickDown(e,n)}}})}))],2)},ut=[];n("159b"),n("4ec9"),n("ac1f"),n("5319"),n("00b4");function pt(t){t.forEach((function(t,e){document.documentElement.addEventListener(e,t)}))}var dt={y:{t:"top",m:"marginTop",b:"bottom"},x:{l:"left",m:"marginLeft",r:"right"}},ft={name:"FpDrag",data:function(){return{bodyDrag:!1,stickDrag:!1,xx:0,yy:0,ww:0,hh:0}},props:{x:{type:Number,default:0},y:{type:Number,default:0},meta:{},scale:{type:Number,default:1},stickSize:{type:Number,default:12},parentWidth:{type:Number,default:0},parentHeight:{type:Number,default:0},sticks:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]}},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0}},watch:{x:{handler:function(t){this.stickDrag||this.bodyDrag||t===this.xx||(this.xx=t)}},y:{handler:function(t){this.stickDrag||this.bodyDrag||t===this.yy||(this.yy=t)}}},computed:{positionStyle:function(){return{top:this.yy*this.scale+"px",left:this.xx*this.scale+"px",zIndex:this.meta.zIndex}},sizeStyle:function(){return{width:this.meta.w*this.scale+"px",height:this.meta.h*this.scale+"px"}},fpDragStick:function(){var t=this;return function(e){var n={width:"12px",height:"12px"};return"tm"!==e&&"bm"!==e||(n={width:"16px",height:"9px"}),"ml"!==e&&"mr"!==e||(n={width:"9px",height:"16px"}),n[dt.y[e[0]]]="".concat(t.stickSize/-2,"px"),n[dt.x[e[1]]]="".concat(t.stickSize/-2,"px"),n}}},mounted:function(){this.xx=this.x,this.yy=this.y,this.domEvents=new Map([["mousemove",this.move],["mouseup",this.up],["mouseleave",this.up]]),pt(this.domEvents)},methods:{bodyDown:function(t){if(this.$emit("active",this.meta.uuid),"undefined"!==typeof t.stopPropagation&&t.stopPropagation(),"undefined"!==typeof t.preventDefault&&t.preventDefault(),!this.meta.lock){this.bodyDrag=!0;var e=Object(h["a"])({},this.positionStyle);this.startY=t.clientY,this.startX=t.clientX,this.startTop=Number(e.top.replace("px","")),this.startLeft=Number(e.left.replace("px",""))}},bodyMove:function(t){t.stopPropagation();var e=t.clientX,n=t.clientY,i={};i.top=n-this.startY+this.startTop,i.left=e-this.startX+this.startLeft;var a=Math.round(i.left/this.scale),s=Math.round(i.top/this.scale);a<=0?a=0:this.meta.w+a>=this.parentWidth&&(a=this.parentWidth-this.meta.w),s<=0?s=0:this.meta.h+s>=this.parentHeight&&(s=this.parentHeight-this.meta.h),this.xx=a,this.yy=s;var o=this.xx,r=this.yy;this.$emit("dragging",{x:o,y:r})},stickDown:function(t,e){if(!this.meta.lock){var n=Object(h["a"])(Object(h["a"])({},this.positionStyle),this.sizeStyle);this.startY=e.clientY,this.startX=e.clientX,this.startTop=Number(n.top.replace("px","")),this.startLeft=Number(n.left.replace("px","")),this.startWidth=Number(n.width.replace("px","")),this.startHeight=Number(n.height.replace("px","")),this.stickName=t,this.stickDrag=!0,this.lastmeta={}}},stickMove:function(t){t.stopPropagation();var e=t.clientX,n=t.clientY,i={};i.top=n-this.startY+this.startTop,i.left=e-this.startX+this.startLeft,i.h=n-this.startY,/t/.test(this.stickName)&&(i.h*=-1),i.h+=this.startHeight,i.w=e-this.startX,/l/.test(this.stickName)&&(i.w*=-1),i.w+=this.startWidth;var a=Math.round(i.left/this.scale),s=Math.round(i.top/this.scale),o=Math.round(i.h/this.scale),r=Math.round(i.w/this.scale);a<=0?a=0:this.meta.w+a>=this.parentWidth&&(a=this.parentWidth-this.meta.w),s<=0?s=0:this.meta.h+s>=this.parentHeight&&(s=this.parentHeight-this.meta.h),/t/.test(this.stickName)&&o>=0&&(this.yy=s),/l/.test(this.stickName)&&r>=0&&(this.xx=a),/[tb]/.test(this.stickName)&&s>0&&o+this.yy<this.parentHeight&&(this.meta.h=o),/[lr]/.test(this.stickName)&&a>0&&r+this.xx<this.parentWidth&&(this.meta.w=r);var c=this.xx,l=this.yy;this.$emit("dragging",{x:c,y:l})},move:function(t){this.bodyDrag&&this.bodyMove(t),this.stickDrag&&this.stickMove(t)},up:function(){if(this.bodyDrag){this.bodyDrag=!1;var t=this.xx,e=this.yy;this.$emit("dragstop",{x:t,y:e})}if(this.stickDrag){this.stickDrag=!1;var n=this.xx,i=this.yy;this.$emit("dragstop",{x:n,y:i,w:this.meta.w,h:this.meta.h})}}}},mt=ft,ht=(n("bd1b"),Object(o["a"])(mt,lt,ut,!1,null,"39588d2b",null)),vt=ht.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.imgSrc,onerror:t.defaultImg}})},gt=[],wt=(n("2ca0"),n("e9c4"),n("bc3a")),yt=n.n(wt),xt=n("4328"),kt=n.n(xt),_t=n("2ef0"),Ct={debug:!1,showLogin:!1,showCode:!1,showChangePwd:!1,showTokenManager:!1,showUserManager:!1,user:{username:"",type:1},fonts:[],token:""},Ot={debug:function(){return Ct.debug},isLogin:function(){return""!==Ct.user.username},token:function(){return Ct.token},apiUrl:function(){return Nt.baseURL},uploadUrl:function(){return Nt.baseURL+"api/upload"},fonts:function(){return Ct.fonts}},jt={setDebug:function(t,e){var n=t.commit;n("setDebug",e)},changepwd:function(t,e){t.commit;return new Promise((function(t){Nt.changepwd(e,(function(e){0===e.code&&t(e)}))}))},login:function(t,e){var n=t.commit;return new Promise((function(t){Nt.login(e,(function(e){0===e.code&&(n("login",e),jt.getUserInfo({commit:n}),t(e))}))}))},logout:function(t,e){var n=t.commit;return new Promise((function(t){Nt.logout(e,(function(e){0===e.code&&(n("logout",e),t(e))}))}))},getUserInfo:function(t,e){var n=t.commit;return new Promise((function(t){Nt.userinfo(e,(function(e){0===e.code&&(n("setUserInfo",e),jt.loadFonts({commit:n}),t(e))}))}))},loadFonts:function(t,e){var n=t.commit;return new Promise((function(t){Nt.http.get("api/fonts").then((function(e){0===e.code&&(n("setFonts",e),e.data.fonts.forEach((function(t){return Nt.loadfont(t.code)})),t(e))}))}))}},Ft={setDebug:function(t,e){t.debug=e},login:function(t,e){t.token=e.data.token,localStorage.setItem("token",e.data.token),t.showLogin=!1},logout:function(t,e){localStorage.removeItem("token"),t.token="";var n={username:"",type:1};t.user=Object(h["a"])({},n)},setUserInfo:function(t,e){t.token=localStorage.getItem("token"),t.user=Object(h["a"])({},e.data.user)},setFonts:function(t,e){t.fonts=e.data.fonts}},St={namespaced:!0,state:Ct,getters:Ot,actions:jt,mutations:Ft},Pt=n("5c96"),It=n.n(Pt),$t="/";function Et(){return localStorage.getItem("token")}"/"===$t&&($t=(location.protocol+"//"+location.host+location.pathname).replace(/(.+\/).*$/,"$1")),window.API_URL=$t,console.info("baseURL",$t);var Ut=yt.a.create({baseURL:$t,timeout:3e3});Ut.interceptors.request.use((function(t){t.headers["token"]=Et();var e={_t:(new Date).getTime()};return"get"===t.method?Object(_t["isPlainObject"])(t.params)&&(t.params=Object(h["a"])(Object(h["a"])({},e),t.params)):"post"===t.method&&(Object(_t["isPlainObject"])(t.data)&&(t.data=Object(h["a"])(Object(h["a"])({},e),t.data)),/^application\/x-www-form-urlencoded/.test(t.headers["content-type"])&&(t.data=kt.a.stringify(t.data))),t}),(function(t){return Promise.reject(t)})),Ut.interceptors.response.use((function(t){return t.data&&401===t.data.code?(console.warn("没有登录"),St.state.showLogin=!0):t.data&&0!==t.data.code&&Pt["Message"].warning(t.data.msg),t.data}),(function(t){return console.error(t),Pt["Message"].error(t),Promise.reject(t)}));var Tt,At,zt=[{id:5,text:"海报",icon:"haibao",activated:!1,extend:!0},{id:2,text:"素材",icon:"sucai",activated:!1,extend:!0},{id:3,text:"组件",icon:"zujian",activated:!1,extend:!0},{id:4,text:"图层",icon:"tuceng",activated:!1,extend:!0},{id:20,text:"帮助",icon:"help1",activated:!1,extend:!1,type:"link",link:"https://poster.prodapi.cn/doc/"},{id:11,text:"调试",icon:"debug",activated:!1,extend:!1}],Dt={},Nt={baseURL:$t,token:Et,http:Ut,imgUrl:function(t){return t&&!t.startsWith("http")?$t+t:t},loadAsideItems:function(t){t(zt)},userinfo:function(t,e){Ut.get("api/user").then(e)},changepwd:function(t,e){Ut.post("api/changepwd",t).then(e)},login:function(t,e){Ut.post("api/login",t).then(e)},logout:function(t,e){Ut.post("api/logout",t).then(e)},loadPosters:function(t){Ut.get("api/posters").then(t)},loadMaterial:function(t,e){Ut.get("api/materials",{params:t}).then(e)},loadPoster:function(t,e){Ut.get("api/posters/"+t).then(e)},savePoster:function(t,e){Ut.post("api/posters",t).then(e)},updatePoster:function(t,e){Ut.put("api/posters",t).then(e)},copyPoster:function(t,e){Ut.post("api/posters/".concat(t,"/copy")).then(e)},removePoster:function(t,e){Ut.delete("api/posters/"+t).then(e)},previewPoster:function(t,e){return new Promise((function(n){var i=new XMLHttpRequest;i.withCredentials=!0,i.open("POST",$t+"api/preview",!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("token",Et()),i.responseType="blob",i.onload=function(t){var i=t.currentTarget;if(200===i.status){var a=i.response;e(a),n(a)}},i.send(JSON.stringify(t))}))},queryTokenList:function(t,e){return Ut.get("api/tokens",t).then(e)},updateToken:function(t,e){return Ut.put("api/tokens",t).then(e)},loadfont:function(t){if(t&&!(t in Dt)){Dt[t]=1;var e=$t+"store/fonts/"+t,n=document.createElement("style");n.innerText='@font-face {font-family: "'+t+'"; src:url("'+e+'")}; font-display: swap;',document.getElementsByTagName("head")[0].appendChild(n)}}},Lt={name:"FpItemImage",data:function(){return{defaultImg:'this.src="'+n("4204")+'"; this.style.background="#fff"'}},computed:{imgSrc:function(){return Nt.imgUrl(this.item.v)}},props:{item:{}}},Rt=Lt,Ht=Object(o["a"])(Rt,bt,gt,!1,null,null,null),Bt=Ht.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{ref:"qrcode",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.imgSrc}})},qt=[],Jt=n("d055"),Wt=n.n(Jt),Kt={name:"FpItemQrcode",data:function(){return{imgSrc:""}},props:{item:{}},watch:{"item.v":{handler:function(){this.gen()}},"item.c":{handler:function(){this.gen()}},"item.bgc":{handler:function(){this.gen()}}},created:function(){this.gen()},methods:{gen:function(){var t=this.item;if(this.item.v){var e={errorCorrectionLevel:"M",margin:t.p,width:t.w,color:{dark:t.c,light:""!==t.bgc?t.bgc:"#ffffff00"}},n=t.v+"",i=this;Wt.a.toDataURL(n,e,(function(t,e){if(t)throw t;i.imgSrc=e}))}}}},Xt=Kt,Yt=Object(o["a"])(Xt,Mt,qt,!1,null,"480fbfbe",null),Gt=Yt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fp-item-image",{staticStyle:{"border-radius":"50%"},style:{border:"1px solid "+t.item.c},attrs:{item:t.item}})},Vt=[],Qt={name:"FpItemAvatar",components:{FpItemImage:Bt},props:{item:{}}},te=Qt,ee=Object(o["a"])(te,Zt,Vt,!1,null,"4d72bc61",null),ne=ee.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",{staticStyle:{width:"100%",height:"100%"},style:{"font-size":t.fontsize,"font-family":"'"+t.item.fn+"'",color:""+t.item.c,"text-align":""+t.item.a,"white-space":t.item.wrap?"break-spaces":"pre","line-height":"calc(1em + "+t.spacing+")"}},[t._v(t._s(t.item.v))])},ae=[],se={name:"FpItemText",props:{item:{}},computed:Object(h["a"])(Object(h["a"])({},Object(j["c"])({scale:"poster/scale"})),{},{fontsize:function(){return this.item.s*this.scale+"px"},spacing:function(){return"4px"}})},oe=se,re=Object(o["a"])(oe,ie,ae,!1,null,"3d0cdb3a",null),ce=re.exports,le={name:"FpPosterItem",components:{FpItemText:ce,FpItemAvatar:ne,FpItemQrcode:Gt,FpItemImage:Bt,FpDrag:vt},props:{item:{}},created:function(){},computed:Object(h["a"])(Object(h["a"])({},Object(j["c"])({W:"poster/w",H:"poster/h",scale:"poster/scale"})),{},{x:function(){return this.item.x*this.scale},y:function(){return this.item.y*this.scale},w:function(){return this.item.w*this.scale},h:function(){return this.item.h*this.scale}}),methods:Object(h["a"])(Object(h["a"])({},Object(j["d"])({setUnActiveItemId:"poster/setUnActiveItemId",setActiveItemId:"poster/setActiveItemId",record:"snapshots/record"})),{},{resizing:function(t){this.item.w=t.width,this.item.h=t.height},dragging:function(t){var e=this.item,n=e.x,i=e.y;n===t.x&&i===t.y||(this.item.x=t.x,this.item.y=t.y)},dragstop:function(t){var e=this.item,n=e.x,i=e.y;this.item.x=t.x,this.item.y=t.y,this.record("".concat(this.item.name," 移动位置 x:").concat(n,", y:").concat(i," ===> x:=").concat(t.x,", y:").concat(t.y))}})},ue=le,pe=Object(o["a"])(ue,rt,ct,!1,null,null,null),de=pe.exports,fe={name:"FpPoster",components:{FpPosterItem:de},computed:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(j["e"])({p:function(t){return t.poster.p}})),Object(j["c"])({w:"poster/w",h:"poster/h",scale:"poster/scale",ai:"poster/ai"})),{},{wpx:function(){return this.w*this.scale+"px"},hpx:function(){return this.h*this.scale+"px"},bgUrl:function(){return"bgUrl"===this.p.use?Nt.imgUrl(this.p.bgUrl):""}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(j["d"])({setActiveItemId:"poster/setActiveItemId",record:"snapshots/record",up:"poster/up",down:"poster/down",removeActiveItem:"poster/removeActiveItem",copyActiveItem:"poster/copyActiveItem"})),Object(j["b"])({savePoster:"poster/savePoster",loadPosters:"panelposter/getItems"})),{},{keydownHandler:function(t){var e=this,n=this.ai;if(n){t.preventDefault();var i=t.altKey?5:t.metaKey?10:1;switch(t.code){case"ArrowLeft":n.x-=i;break;case"ArrowRight":n.x+=i;break;case"ArrowUp":t.shiftKey?this.up(n):n.y-=i;break;case"ArrowDown":t.shiftKey?this.down(n):n.y+=i;break;case"Delete":case"Backspace":this.removeActiveItem(),this.record("删除组件: ".concat(n.name," - ").concat(n.uuid));break;case"KeyV":(t.ctrlKey||t.metaKey)&&(this.copyActiveItem(n),this.record("复制组件: ".concat(this.ai.name," - ").concat(this.ai.uuid)));break;case"KeyS":(t.ctrlKey||t.metaKey)&&this.savePoster().then((function(t){e.$message({message:"保存成功",type:"success",duration:1e3}),e.loadPosters()}));break}}}})},me=fe,he=(n("8b10"),Object(o["a"])(me,st,ot,!1,null,"21fcc79d",null)),ve=he.exports,be={name:"FpDesignEditor",components:{FpPoster:ve},mounted:function(){var t=this;this.getUserInfo().then((function(){t.openPoster()}))},methods:Object(h["a"])(Object(h["a"])({},Object(j["d"])({setUnActiveAllItem:"poster/setUnActiveAllItem"})),Object(j["b"])({getUserInfo:"editor/getUserInfo",openPoster:"aside/openPoster"}))},ge=be,we=(n("2345"),Object(o["a"])(ge,it,at,!1,null,"e10b5e7e",null)),ye=we.exports,xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-editor-bottom-bar"},[n("i",{staticClass:"iconfont icon--minus",on:{click:t.shrink}}),n("span",{staticClass:"scale-num"},[t._v(t._s(t._f("formatPrcent")(t.scale)))]),n("i",{staticClass:"iconfont icon--plus",on:{click:t.magnify}})])},ke=[],_e=(n("b680"),{name:"FpEditorBottomBar",computed:Object(h["a"])({},Object(j["e"])({scale:function(t){return t.poster.p.scale}})),filters:{formatPrcent:function(t){return(100*Number(t)).toFixed(0)+"%"}},methods:Object(h["a"])({},Object(j["b"])({shrink:"poster/shrink",magnify:"poster/magnify"}))}),Ce=_e,Oe=(n("ab8b"),Object(o["a"])(Ce,xe,ke,!1,null,"7bd32b20",null)),je=Oe.exports,Fe={name:"FpMainContainer",components:{FpEditorBottomBar:je,FpDesignEditor:ye},computed:Object(h["a"])({},Object(j["c"])({AsideIsActived:"aside/isActived"}))},Se=Fe,Pe=(n("42ec"),Object(o["a"])(Se,et,nt,!1,null,"df62822e",null)),Ie=Pe.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-setting-container"},[n("fp-setting-canvas",{directives:[{name:"show",rawName:"v-show",value:!t.ai,expression:"!ai"}]}),t.ai?n("fp-setting-component"):t._e()],1)},Ee=[],Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fp-setting-wrapper",[n("template",{slot:"header"},[n("button",{staticClass:"active"},[t._v("海报设置")])]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 名称 ["+t._s(t.p.id)+"] ")])]),n("div",[n("el-input",{staticStyle:{width:"100%"},model:{value:t.p.name,callback:function(e){t.$set(t.p,"name",e)},expression:"p.name"}})],1)]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 格式 ")])]),n("div",[n("el-radio",{attrs:{label:"jpeg"},model:{value:t.p.type,callback:function(e){t.$set(t.p,"type",e)},expression:"p.type"}},[t._v("jpg")]),n("el-radio",{attrs:{label:"png"},model:{value:t.p.type,callback:function(e){t.$set(t.p,"type",e)},expression:"p.type"}},[t._v("png")]),n("el-radio",{attrs:{label:"webp"},model:{value:t.p.type,callback:function(e){t.$set(t.p,"type",e)},expression:"p.type"}},[t._v("webp")])],1),n("div",[n("el-slider",{attrs:{disabled:"png"==t.p.type,min:20,max:100},model:{value:t.p.quality,callback:function(e){t.$set(t.p,"quality",e)},expression:"p.quality"}})],1)]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 尺寸(px) ")])]),n("div",{staticClass:"fp-canvas-view"},[n("div",{staticClass:"fp-canvas-view-item"},[n("span",{staticClass:"fp-canvas-view-item-label"},[t._v("宽")]),n("el-input-number",{staticStyle:{width:"80px"},attrs:{size:"small","controls-position":"right",min:1,max:5999},model:{value:t.p.w,callback:function(e){t.$set(t.p,"w",e)},expression:"p.w"}})],1),n("i"),n("div",{staticClass:"fp-canvas-view-item"},[n("span",{staticClass:"fp-canvas-view-item-label"},[t._v("高")]),n("el-input-number",{staticStyle:{width:"80px"},attrs:{size:"small","controls-position":"right",min:1,max:59999},model:{value:t.p.h,callback:function(e){t.$set(t.p,"h",e)},expression:"p.h"}})],1)])]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 常用尺寸 ")])]),n("div",{},[n("el-select",{staticStyle:{width:"230px"},attrs:{size:"small",placeholder:"请选择"},on:{change:t.changeCanvasSize},model:{value:t.canvasSize,callback:function(e){t.canvasSize=e},expression:"canvasSize"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),n("div",{staticClass:"fp-setting-panel-row"},[n("el-tabs",{attrs:{stretch:""},model:{value:t.p.use,callback:function(e){t.$set(t.p,"use",e)},expression:"p.use"}},[n("el-tab-pane",{attrs:{label:"颜色",name:"bgc"}},[n("el-tooltip",{attrs:{content:"设置背景颜色",placement:"left"}},[n("fp-setting-color-picker",{attrs:{value:t.p.bgc},on:{"update:value":function(e){return t.$set(t.p,"bgc",e)}}})],1)],1),n("el-tab-pane",{attrs:{label:"图片",name:"bgUrl"}},[n("div",{staticStyle:{"text-align":"center"}},[n("el-input",{staticStyle:{"margin-bottom":"16px"},attrs:{size:"small",type:"textarea",rows:"4"},model:{value:t.p.bgUrl,callback:function(e){t.$set(t.p,"bgUrl",e)},expression:"p.bgUrl"}})],1),n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("fp-setting-file-upload",{on:{change:t.changeImg}}),n("fp-button",{on:{click:t.resize}},[t._v("原始尺寸")]),n("fp-button",{on:{click:function(e){return t.changeImg("")}}},[t._v("清除")])],1)])],1)],1)],2)},Te=[],Ae=(n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-setting-wrapper"},[n("div",{staticClass:"fp-setting-header"},[t._t("header",(function(){return[t._v("标题")]}))],2),n("div",{staticClass:"fp-setting-panel"},[n("div",{staticClass:"fp-setting-panel-content"},[t._t("default")],2)])])}),ze=[],De={name:"FpSettingWrapper"},Ne=De,Le=(n("433d"),Object(o["a"])(Ne,Ae,ze,!1,null,"5133e74a",null)),Re=Le.exports,He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-color-picker",{staticClass:"fp-color-picker",attrs:{value:t.value,predefine:t.predefineColors},on:{change:t.change}})},Be=[],Me={name:"FpSettingColorPicker",data:function(){return{predefineColors2:["#606266","#ffffff","#000000","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#409EFF","#67C23A","#F56C6C","#909399","#FF5F7E","#142F43","#94B3FD","#17D7A0","#A2D2FF","#C32BAD"],predefineColors3:["#000000","#105EF5","#F53333","#FFDE00","#3CE025","#3AEFF4","#6929E1","#E633E6","#B0B0B0","#4D7CFF","#DDE0E3","#FF5F7E","#759FFF","#FFFFFF","#C7DBFF","#142F43","#94B3FD","#17D7A0","#A2D2FF","#C32BAD"],predefineColors:["#FEC514","#F04E98","#00BFB3","#0077CC","#3CE025","#343741","#6929E1","#E633E6","#B0B0B0","#4D7CFF","#DDE0E3","#FF5F7E","#759FFF","#FFFFFF","#C7DBFF","#142F43","#94B3FD","#17D7A0","#A2D2FF","#C32BAD"]}},props:{value:{default:""}},methods:{change:function(t){t=null==t?"":t,this.$emit("update:value",t)}}},qe=Me,Je=(n("2599"),Object(o["a"])(qe,He,Be,!1,null,"380eed5e",null)),We=Je.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-upload",{staticClass:"fp-setting-upload",attrs:{"show-file-list":!1,"on-success":t.handleSuccess,headers:{token:t.token},action:t.uploadUrl,accept:"image/png, image/jpeg"}},[n("fp-button",[t._v(t._s(t.buttonText))])],1)},Xe=[],Ye={name:"FpSettingFileUpload",components:{FpButton:_},props:{buttonText:{default:"上传"}},computed:Object(h["a"])({},Object(j["c"])({uploadUrl:"editor/uploadUrl",token:"editor/token"})),methods:{handleSuccess:function(t){0===t.code&&this.$emit("change",t.data.files[0].path)}}},Ge=Ye,Ze=(n("4f29"),Object(o["a"])(Ge,Ke,Xe,!1,null,"5cfdd4ee",null)),Ve=Ze.exports,Qe={name:"FpSettingCanvas",components:{FpButton:_,FpSettingFileUpload:Ve,FpSettingWrapper:Re,FpSettingColorPicker:We},data:function(){return{options:[{value:"750,1333",label:"海报 750 x 1333"},{value:"900,500",label:"课程封面 900 x 500"},{value:"900,383",label:"公众号首图 900 x 383"},{value:"640,1008",label:"海报 640 x 1008"},{value:"720,1280",label:"海报 720 x 1280"},{value:"1078,2280",label:"海报 1078 x 2280"},{value:"1242,2208",label:"海报 1242 x 2208"},{value:"800,800",label:"朋友圈背景 800 x 800"},{value:"800,2000",label:"长图海报 800 x 2000"},{value:"1200,1200",label:"方形海报 1200 x 1200"},{value:"1080,1080",label:"方形 1080 x 1080"}],canvasSize:""}},computed:Object(h["a"])({},Object(j["e"])({p:function(t){return t.poster.p}})),methods:Object(h["a"])(Object(h["a"])({},Object(j["d"])({changePosterSize:"poster/changePosterSize",record:"snapshots/record"})),{},{changeCanvasSize:function(t){var e=t.split(","),n=~~e[0],i=~~e[1];this.changePosterSize({w:n,h:i})},resize:function(){var t=this,e=new Image;e.src=Nt.imgUrl(this.p.bgUrl),e.onload=function(){t.changePosterSize({w:e.width,h:e.height}),t.record("更改海报原始尺寸")}},changeImg:function(t){var e=this;if(t){var n=new Image;n.src=Nt.imgUrl(t),n.onload=function(i){e.p.bgUrl=t,e.changePosterSize({w:n.width,h:n.height}),e.record("更改背景图片, url=",t)}}else this.p.bgUrl=t,this.record("清除背景图片, url=",t)}})},tn=Qe,en=Object(o["a"])(tn,Ue,Te,!1,null,"9be4177c",null),nn=en.exports,an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fp-setting-wrapper",[n("template",{slot:"header"},[n("button",{staticClass:"active"},[t._v(t._s(t.title))])]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 尺寸(px) ")])]),n("div",{staticClass:"fp-canvas-view"},[n("div",{staticClass:"fp-canvas-view-item"},[n("span",{staticClass:"fp-canvas-view-item-label"},[t._v("宽")]),n("el-input-number",{staticStyle:{width:"80px"},attrs:{disabled:t.ai.lock,size:"small","controls-position":"right",min:1,max:t.w},model:{value:t.ai.w,callback:function(e){t.$set(t.ai,"w",e)},expression:"ai.w"}})],1),n("i"),n("div",{staticClass:"fp-canvas-view-item"},[n("span",{staticClass:"fp-canvas-view-item-label"},[t._v("高")]),n("el-input-number",{staticStyle:{width:"80px"},attrs:{disabled:t.ai.lock,size:"small","controls-position":"right",min:1,max:t.h},model:{value:t.ai.h,callback:function(e){t.$set(t.ai,"h",e)},expression:"ai.h"}})],1)])]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 位置(px) ")])]),n("div",{staticClass:"fp-canvas-view"},[n("div",{staticClass:"fp-canvas-view-item"},[n("span",{staticClass:"fp-canvas-view-item-label"},[t._v("x")]),n("el-input-number",{staticStyle:{width:"80px"},attrs:{disabled:t.ai.lock,size:"small","controls-position":"right",min:0,max:t.w-t.ai.w},model:{value:t.ai.x,callback:function(e){t.$set(t.ai,"x",e)},expression:"ai.x"}})],1),n("i"),n("div",{staticClass:"fp-canvas-view-item"},[n("span",{staticClass:"fp-canvas-view-item-label"},[t._v("y")]),n("el-input-number",{staticStyle:{width:"80px"},attrs:{disabled:t.ai.lock,size:"small","controls-position":"right",min:0,max:t.h-t.ai.h},model:{value:t.ai.y,callback:function(e){t.$set(t.ai,"y",e)},expression:"ai.y"}})],1)])]),n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 参数设置 ")])]),n("el-form",{ref:"form",attrs:{model:t.ai,"label-width":"40px",size:"small"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.ai.vd,callback:function(e){t.$set(t.ai,"vd",e)},expression:"ai.vd"}})],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{model:{value:t.ai.name,callback:function(e){t.$set(t.ai,"name",e)},expression:"ai.name"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.ai.v,callback:function(e){t.$set(t.ai,"v",e)},expression:"ai.v"}})],1)],1)],1),"text"===t.ai.t?n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 字体 ")])]),n("div",[n("el-select",{staticClass:"fp-select-font",staticStyle:{width:"76%"},style:{"font-family":"'"+t.ai.fn+"'"},attrs:{placeholder:"请选择"},model:{value:t.ai.fn,callback:function(e){t.$set(t.ai,"fn",e)},expression:"ai.fn"}},t._l(t.fonts,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code}},[n("span",{staticStyle:{float:"left"},style:{"font-family":"'"+e.code+"'"}},[t._v(t._s(e.name))])])})),1),n("el-input-number",{staticStyle:{width:"23%","padding-left":"4px"},attrs:{disabled:t.ai.lock,size:"small","controls-position":"right",min:4,max:800},model:{value:t.ai.s,callback:function(e){t.$set(t.ai,"s",e)},expression:"ai.s"}})],1)]):t._e(),"image"!==t.ai.t?n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" "+t._s("avatar"===t.ai.t?"边框":"")+"颜色 ")])]),n("el-tooltip",{attrs:{content:"设置颜色",placement:"left"}},[n("fp-setting-color-picker",{attrs:{value:t.ai.c},on:{"update:value":function(e){return t.$set(t.ai,"c",e)}}})],1),"qrcode"===t.ai.t||"sqrcode"===t.ai.t?n("el-tooltip",{attrs:{content:"设置背景颜色",placement:"left"}},[n("fp-setting-color-picker",{attrs:{value:t.ai.bgc},on:{"update:value":function(e){return t.$set(t.ai,"bgc",e)}}})],1):t._e()],1):t._e(),"avatar"===t.ai.t||"image"===t.ai.t?n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-setting-panel-row-cell"},[n("div",{staticClass:"fp-setting-panel-row-cell-label"},[t._v(" 图片 ")])]),n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("fp-setting-file-upload",{on:{change:t.changeImg}}),n("fp-button",{on:{click:t.changeImgSize}},[t._v("原始尺寸")]),n("fp-button",{on:{click:function(e){return t.changeImg("")}}},[t._v("清除")])],1)]):t._e(),n("fp-setting-component-bottom-bar")],2)},sn=[],on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-setting-panel-row"},[n("div",{staticClass:"fp-settting-component-bar"},[t.ai.lock?t._e():n("el-tooltip",{attrs:{content:"锁定",placement:"top"}},[n("button",{on:{click:function(e){t.ai.lock=!0}}},[n("i",{staticClass:"iconfont icon-lock"})])]),t.ai.lock?n("el-tooltip",{attrs:{content:"解锁",placement:"top"}},[n("button",{staticClass:"locked",on:{click:function(e){t.ai.lock=!1}}},[n("i",{staticClass:"iconfont icon-unlock"})])]):t._e(),n("el-tooltip",{attrs:{content:"复制",placement:"top"}},[n("button",{attrs:{disabled:t.disabled},on:{click:t.copyItem}},[n("i",{staticClass:"iconfont icon-copy"})])]),n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("button",{attrs:{disabled:t.disabled},on:{click:t.removeItem}},[n("i",{staticClass:"iconfont icon-shanchu"})])])],1),n("div",{staticClass:"fp-settting-component-bar",staticStyle:{"margin-top":"2px"}},[n("el-tooltip",{attrs:{content:"置顶",placement:"top"}},[n("button",{attrs:{disabled:t.disabled||t.ai.z>=t.maxZ},on:{click:t.toTop}},[n("i",{staticClass:"iconfont icon-top"})])]),n("el-tooltip",{attrs:{content:"向上",placement:"top"}},[n("button",{attrs:{disabled:t.disabled||t.ai.z>=t.maxZ},on:{click:t.toUp}},[n("i",{staticClass:"iconfont icon-up"})])]),n("el-tooltip",{attrs:{content:"向下",placement:"top"}},[n("button",{attrs:{disabled:t.disabled||t.ai.z<=1},on:{click:t.toDown}},[n("i",{staticClass:"iconfont icon-down"})])]),n("el-tooltip",{attrs:{content:"置底",placement:"top"}},[n("button",{attrs:{disabled:t.disabled||t.ai.z<=1},on:{click:t.toBottom}},[n("i",{staticClass:"iconfont icon-bottom"})])])],1),"text"===t.ai.t?n("div",{staticClass:"fp-settting-component-bar text",staticStyle:{"margin-top":"2px"}},[n("el-tooltip",{attrs:{content:"左对齐",placement:"top"}},[n("button",{class:{active:"left"===t.ai.a},attrs:{disabled:t.disabled},on:{click:function(e){t.ai.a="left"}}},[n("i",{staticClass:"iconfont icon-align-left"})])]),n("el-tooltip",{attrs:{content:"居中对齐",placement:"top"}},[n("button",{class:{active:"center"===t.ai.a},attrs:{disabled:t.disabled},on:{click:function(e){t.ai.a="center"}}},[n("i",{staticClass:"iconfont icon-align-center"})])]),n("el-tooltip",{attrs:{content:"右对齐",placement:"top"}},[n("button",{class:{active:"right"===t.ai.a},attrs:{disabled:t.disabled},on:{click:function(e){t.ai.a="right"}}},[n("i",{staticClass:"iconfont icon-align-right"})])]),n("el-tooltip",{attrs:{content:"自动换行",placement:"top"}},[n("button",{class:{active:t.ai.wrap},attrs:{disabled:t.disabled},on:{click:function(e){t.ai.wrap=!t.ai.wrap}}},[n("i",{staticClass:"iconfont icon-text-wrap"})])])],1):t._e()])},rn=[],cn={name:"FpSettingComponentBottomBar",data:function(){return{value1:0}},computed:Object(h["a"])(Object(h["a"])({},Object(j["c"])({ai:"poster/ai",maxZ:"poster/maxZ"})),{},{disabled:function(){return this.ai.lock}}),methods:Object(h["a"])(Object(h["a"])({},Object(j["d"])({removeActiveItem:"poster/removeActiveItem",copyActiveItem:"poster/copyActiveItem",record:"snapshots/record",top:"poster/top",bottom:"poster/bottom",up:"poster/up",down:"poster/down"})),{},{removeItem:function(){var t=this.ai;this.removeActiveItem(),this.record("删除组件: ".concat(t.name," - ").concat(t.uuid))},copyItem:function(){this.copyActiveItem(this.ai),this.record("复制组件: ".concat(this.ai.name," - ").concat(this.ai.uuid))},toTop:function(){this.top(this.ai),this.record("置顶组件: ".concat(this.ai.name," - ").concat(this.ai.uuid))},toBottom:function(){this.bottom(this.ai),this.record("置底组件: ".concat(this.ai.name," - ").concat(this.ai.uuid))},toUp:function(){this.up(this.ai),this.record("上移组件: ".concat(this.ai.name," - ").concat(this.ai.uuid))},toDown:function(){this.down(this.ai),this.record("下移组件: ".concat(this.ai.name," - ").concat(this.ai.uuid))}})},ln=cn,un=(n("e54d"),Object(o["a"])(ln,on,rn,!1,null,"6d8fb26f",null)),pn=un.exports,dn={text:"文字",image:"图片",avatar:"头像",qrcode:"二维码"},fn={name:"FpSettingComponent",components:{FpButton:_,FpSettingFileUpload:Ve,FpSettingColorPicker:We,FpSettingComponentBottomBar:pn,FpSettingWrapper:Re},computed:Object(h["a"])(Object(h["a"])({},Object(j["c"])({w:"poster/w",h:"poster/h",ai:"poster/ai",fonts:"editor/fonts"})),{},{title:function(){var t=dn[this.ai.t];return"undefined"!==typeof t?t:this.ai.name}}),methods:Object(h["a"])(Object(h["a"])({},Object(j["d"])({record:"snapshots/record"})),{},{changeImg:function(t){var e=this.ai;this.ai.v=t,this.record("更改图片: ".concat(e.name,", url=").concat(t))},changeImgSize:function(){var t=this,e=this.ai,n=new Image;n.src=Nt.imgUrl(e.v),n.onload=function(){e.w=n.width,e.h=n.height,t.record("更改图片原始尺寸: ".concat(e.name))}}})},mn=fn,hn=(n("acbe"),Object(o["a"])(mn,an,sn,!1,null,"19c65879",null)),vn=hn.exports,bn={name:"FpSettingContainer",components:{FpSettingComponent:vn,FpSettingCanvas:nn},computed:Object(h["a"])({},Object(j["c"])({ai:"poster/ai"}))},gn=bn,wn=(n("da01"),n("888c"),Object(o["a"])(gn,$e,Ee,!1,null,"5872bc14",null)),yn=wn.exports,xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fp-debug-panel",class:{active:t.editor.debug},on:{click:function(e){return t.setDebug(!0)},dblclick:function(e){return t.setDebug(!1)}}},[n("pre",{staticClass:"code language-json line-numbers",domProps:{innerHTML:t._s(t.html)}})])},kn=[],_n=n("c197"),Cn=n.n(_n),On=(n("f393"),{name:"FpDebugPanel",computed:Object(h["a"])(Object(h["a"])({},Object(j["e"])({p:function(t){return t.poster.p},editor:function(t){return t.editor}})),{},{html:function(){return Cn.a.highlight(JSON.stringify(this.p,"",2),Cn.a.languages.json,"json")}}),methods:Object(h["a"])({},Object(j["b"])({setDebug:"editor/setDebug"}))}),jn=On,Fn=(n("7316"),Object(o["a"])(jn,xn,kn,!1,null,"347529be",null)),Sn=Fn.exports,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[t._m(0),n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"list"},t._l(t.items,(function(e){return n("fp-aside-panel-component-item",{key:e.t,attrs:{icon:e.t,title:e.name,desc:e.desc},on:{click:function(n){return t.addItemToEditor(e)}}})})),1)])])},In=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("h3",[t._v("组件")])])}],$n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item",on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"iconfont",class:["icon-"+t.icon]}),n("div",{staticClass:"item-desc"},[n("h3",[t._v(t._s(t.title))]),n("p",[t._v(t._s(t.desc))])])])},En=[],Un={name:"FpAsidePanelComponentItem",props:{icon:{default:"icon-zujian"},title:{default:"标题"},desc:{default:"描述"}}},Tn=Un,An=(n("8a15"),Object(o["a"])(Tn,$n,En,!1,null,"25da81ab",null)),zn=An.exports,Dn={name:"FpAsidePanelComponent",components:{FpAsidePanelComponentItem:zn},data:function(){return{items:[{t:"text",name:"文字",desc:"点击创建",v:"请输入文字",w:200,h:50},{t:"image",name:"图片",desc:"点击创建",v:"https://poster.prodapi.cn/static/images/xiaoniu.png",w:200},{t:"avatar",name:"头像",desc:"点击创建",v:"https://poster.prodapi.cn/static/images/xiaoniu.png",w:80,h:80},{t:"qrcode",name:"二维码",desc:"点击创建",v:"https://poster.prodapi.cn/",w:120,h:120,p:0,c:"#000000",bgc:"#ffffff"}]}},methods:Object(h["a"])(Object(h["a"])({},Object(j["d"])({addItem:"poster/addItem",record:"snapshots/record"})),{},{addItemToEditor:function(t){this.addItem(t),this.record("新增组件: ".concat(t.name))}})},Nn=Dn,Ln=(n("80ea"),Object(o["a"])(Nn,Pn,In,!1,null,"3d28f6fc",null)),Rn=Ln.exports,Hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[t._m(0),n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"list"},t._l(t.p.items,(function(e){return n("div",{key:e.uuid,staticClass:"fp-component-layer",class:{active:e.active,lock:e.lock},on:{click:function(n){return t.setActiveItemId(e.uuid)}}},[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.maxNum-e.z))]),n("i",{staticClass:"iconfont",class:["icon-"+e.t]}),e.vd?n("span",[t._v(t._s(e.vd))]):t._e(),e.vd?t._e():n("span",[t._v("未设置参数名称")])])})),0),n("fp-empty",{attrs:{data:t.p.items}})],1)])},Bn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("h3",[t._v("图层")])])}],Mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticStyle:{"text-align":"center","padding-top":"16px"},attrs:{title:"暂无数据"}},[n("i",{staticClass:"iconfont icon-ziyuan",style:{"font-size":t.size+"px"}})])},qn=[],Jn={name:"FpEmpty",props:{size:{default:40},data:{type:[Boolean,Object,Array],default:!0}},computed:{isShow:function(){return"undefined"===typeof this.data||(this.data instanceof Array?this.data.length<=0:!(this.data instanceof Boolean)||!this.data)}}},Wn=Jn,Kn=Object(o["a"])(Wn,Mn,qn,!1,null,"11fb6a24",null),Xn=Kn.exports,Yn={name:"FpAsidePanelLayer",components:{FpEmpty:Xn},data:function(){return{drag:!1}},computed:Object(h["a"])(Object(h["a"])({},Object(j["e"])({p:function(t){return t.poster.p}})),{},{maxNum:function(){return this.p.items.length+1}}),methods:Object(h["a"])({},Object(j["d"])({setActiveItemId:"poster/setActiveItemId",layerSort:"poster/layerSort"}))},Gn=Yn,Zn=(n("e72f"),Object(o["a"])(Gn,Hn,Bn,!1,null,"66d452fd",null)),Vn=Zn.exports,Qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"快速登录",visible:t.editor.showLogin,width:"40%"},on:{"update:visible":function(e){return t.$set(t.editor,"showLogin",e)}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"账号",prop:"username"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"账号"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{"show-password":""},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("立即登录")])],1)],1)],1)},ti=[],ei={name:"FpLogin",computed:Object(h["a"])({},Object(j["e"])({editor:function(t){return t.editor}})),data:function(){return{ruleForm:{username:"demo",password:"demo"},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:32,message:"长度在 3 到 32 个字符",trigger:"blur"}]}}},methods:Object(h["a"])(Object(h["a"])({},Object(j["b"])({login:"editor/login",openPoster:"aside/openPoster"})),{},{submitForm:function(t){var e=this;return this.$refs[t].validate((function(t){t&&e.login(e.ruleForm).then((function(t){e.openPoster()}))})),!1}})},ni=ei,ii=Object(o["a"])(ni,Qn,ti,!1,null,"27571c88",null),ai=ii.exports,si=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[t._m(0),n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"list"},t._l(t.items,(function(e){return n("div",{key:e.id,staticClass:"fp-poster",on:{click:function(n){return t.changePoster(e)}}},[n("div",{staticClass:"fp-poster-title",attrs:{title:e.id+" "+e.name}},[t._v(" "+t._s(e.name)+" ")]),n("img",{attrs:{src:e.preview}}),n("div",{staticClass:"fp-poster-tool"},[n("i",{staticClass:"iconfont icon-fuzhi1 i-btn",attrs:{title:"复制"},on:{click:function(n){return n.stopPropagation(),t.copy(e.id)}}}),n("i",{staticClass:"iconfont icon-shanchu i-btn",attrs:{title:"删除"},on:{click:function(n){return n.stopPropagation(),t.remove(e.id)}}})])])})),0),n("fp-empty",{attrs:{data:t.items}})],1)])},oi=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("h3",[t._v("海报")])])}],ri={name:"FpAsidePanelPoster",components:{FpEmpty:Xn},computed:Object(h["a"])({},Object(j["e"])({items:function(t){return t.panelposter.items},p:function(t){return t.poster.p}})),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(j["b"])({loadPosters:"panelposter/getItems",loadPoster:"poster/loadPoster",copyPoster:"poster/copyPoster",removePoster:"poster/removePoster"})),Object(j["d"])({clear:"snapshots/clear",record:"snapshots/record"})),{},{changePoster:function(t){var e=this;t.id!==this.p.id&&this.$confirm("确定要切换海报么?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loadPoster(t.id).then((function(){e.clear(),e.record("重新加载")}))}))},copy:function(t){var e=this;this.copyPoster(t).then((function(){e.loadPosters()}))},remove:function(t){var e=this;this.$confirm("确定要删除海报吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t!==e.p.id&&e.clear(),e.removePoster(t).then((function(){e.loadPosters()}))}))}}),created:function(){this.loadPosters()}},ci=ri,li=(n("eece"),Object(o["a"])(ci,si,oi,!1,null,"f3f87674",null)),ui=li.exports,pi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"生成代码",visible:t.editor.showCode,"custom-class":"code-dialog",width:"70%"},on:{"update:visible":function(e){return t.$set(t.editor,"showCode",e)}}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"cURL",name:"cURL"}},[n("fp-code-curl")],1),n("el-tab-pane",{attrs:{label:"JS",name:"JS"}},[n("fp-code-js")],1),n("el-tab-pane",{attrs:{label:"Java",name:"Java"}},[n("fp-code-java")],1),n("el-tab-pane",{attrs:{label:"Python",name:"Python"}},[n("fp-code-python")],1),n("el-tab-pane",{attrs:{label:"Go",name:"Go"}},[n("fp-code-go")],1),n("el-tab-pane",{attrs:{label:"PHP",name:"PHP"}},[n("fp-code-php")],1)],1)],1)},di=[],fi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticClass:"code language-java line-numbers",domProps:{innerHTML:t._s(t.html)}}),n("el-button",{ref:"btnCopy",staticStyle:{position:"absolute",top:"20px",right:"10px"},attrs:{type:"info"}},[t._v("复制")])],1)},mi=[],hi=(n("4e82"),n("922d"),n("b311")),vi=n.n(hi),bi={name:"FpCodeMixin",mounted:function(){var t=this,e=this,n=new vi.a(this.$refs["btnCopy"].$el,{text:function(){return e.code()}});n.on("success",(function(){t.$message({message:"复制成功",type:"success",duration:1e3})}))},computed:Object(h["a"])(Object(h["a"])({},Object(j["e"])({items:function(t){return t.poster.p.items},posterId:function(t){return t.poster.p.id}})),Object(j["c"])({token:"editor/token",apiUrl:"editor/apiUrl"})),methods:{code:function(){return""}}},gi=bi,wi=(n("f936"),Object(o["a"])(gi,Tt,At,!1,null,"bad22694",null)),yi=wi.exports,xi={name:"FpCodeJava",mixins:[yi],computed:{html:function(){return Cn.a.highlight(this.code(),Cn.a.languages.java,"java")}},methods:{code:function(){var t="";this.items.sort((function(t,e){return t["vd"].localeCompare(e["vd"])})).forEach((function(e){e.vd&&(t+='        params.put("'.concat(e.vd,'", "').concat(e.v,'");\n'))})),t=t||"        // 暂未指定任何动态参数\n";var e='import java.util.HashMap;\nimport com.alibaba.fastjson.JSON;\nimport com.alibaba.fastjson.JSONObject;\nimport okhttp3.*;\nimport org.apache.commons.io.FileUtils;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.concurrent.TimeUnit;\n\npublic class PosterClientDemo {\n\n    public static void main(String[] args) {\n\n        // 创建海报客户端对象\n        PosterClient posterClient = new PosterClient("'.concat(this.apiUrl,'", "').concat(this.token,'");\n\n        // 构造海报参数\n        HashMap<String, String> params = new HashMap<>();\n').concat(t,'\n        // 海报ID\n        String id = "').concat(this.posterId,'";\n\n        // 获取下载地址\n        String url = posterClient.getUrl(id, params);\n        System.out.println("url=" + url);\n\n        // 保存到本地\n        posterClient.saveToPath(url, "temp.png");\n\n    }\n\n}\n\nclass PosterClient {\n\n    final static OkHttpClient okHttpClient = new OkHttpClient.Builder().connectTimeout(6, TimeUnit.SECONDS).build();\n    private static final String USER_AGENT = "fastposter-pro-client/v2.0.0";\n\n    /**\n     * 接入点\n     */\n    private String endpoint;\n    /**\n     * 访问KEY\n     */\n    private String token;\n\n    public PosterClient(String endpoint, String token) {\n\n        this.token = token;\n\n        endpoint = endpoint.trim();\n        if (endpoint.endsWith("/")) {\n            endpoint = endpoint.substring(0, endpoint.length() - 1);\n        }\n        this.endpoint = endpoint;\n\n    }\n\n    /**\n     * 获取海报访问地址\n     *\n     * @param id 海报ID\n     * @param params   参数列表\n     * @return String\n     */\n    public String getUrl(String id, Map<String, String> params) {\n        if (params == null) {\n            params = new HashMap<>();\n        }\n        params.put("id", id);\n\n        String url = this.endpoint + "/api/link";\n\n        MediaType mediaType = MediaType.parse("application/json");\n        String json = JSON.toJSONString(params, true);\n        RequestBody body = RequestBody.create(mediaType, json);\n        Request request = new Request.Builder()\n                .url(url)\n                .post(body)\n                .addHeader("User-Agent", USER_AGENT)\n                .addHeader("Content-Type", "application/json")\n                .addHeader("token", this.token)\n                .addHeader("cache-control", "no-cache")\n                .build();\n\n        try {\n            Response response = okHttpClient.newCall(request).execute();\n            String jsonR = response.body().string();\n            JSONObject o = JSONObject.parseObject(jsonR);\n            if (o.getInteger("code") == 0) {\n                url = o.getJSONObject("data").getString("url");\n            } else {\n                throw new RuntimeException("获取海报链接异常: " + o.getString("msg"));\n            }\n\n            return url.startsWith("http") ? url : endpoint + "/" + url;\n        } catch (IOException e) {\n            throw new RuntimeException("获取海报链接异常", e);\n        }\n    }\n\n    /**\n     * 获取海报数据\n     *\n     * @param url\n     * @return\n     */\n    public byte[] getData(String url) {\n        try {\n            Request request = new Request.Builder()\n                    .url(url)\n                    .addHeader("User-Agent", USER_AGENT)\n                    .get()\n                    .build();\n            Response response = okHttpClient.newCall(request).execute();\n            return response.body().bytes();\n        } catch (Exception e) {\n            throw new RuntimeException("获取海报数据异常", e);\n        }\n    }\n\n    /**\n     * 保存海报到文件\n     *\n     * @param url\n     * @param path\n     */\n    public void saveToPath(String url, String path) {\n        try {\n            byte[] data = getData(url);\n            FileUtils.writeByteArrayToFile(new File(path), data);\n        } catch (IOException e) {\n            new RuntimeException("保存海报到文件", e);\n        }\n    }\n\n}\n');return e}}},ki=xi,_i=(n("bfe1"),Object(o["a"])(ki,fi,mi,!1,null,"2e55dc20",null)),Ci=_i.exports,Oi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticClass:"code language-python line-numbers",domProps:{innerHTML:t._s(t.html)}}),n("el-button",{ref:"btnCopy",staticStyle:{position:"absolute",top:"20px",right:"10px"},attrs:{type:"info"}},[t._v("复制")])],1)},ji=[],Fi=(n("3d21"),{name:"FpCodePython",mixins:[yi],computed:{html:function(){return Cn.a.highlight(this.code(),Cn.a.languages.python,"python")}},methods:{code:function(){var t="";this.items.forEach((function(e){e.vd&&(t+='    params["'.concat(e.vd,'"]="').concat(e.v,'"\n'))})),t=t||"    # 暂未指定任何动态参数\n";var e="import requests\nimport json\n\nclass posterapi():\n\n    def __init__(self, endpoint: str, token: str):\n        if endpoint.endswith(\"/\"):\n            endpoint = endpoint[0:-1]\n        self.endpoint = endpoint\n        self.token = token\n\n    def getUrl(self, posterId: str, params: dict = {}):\n        params = dict(params)\n        params['id'] = posterId\n        url = f\"{self.endpoint}/api/link\"\n        headers = {\n            'Content-Type': 'application/json',\n            'token': '".concat(this.token,"'\n        }\n        payload = json.dumps(params)\n        response = requests.request(\"POST\", url, headers=headers, data=payload)\n        link = response.json()['data']['url']  # type:str\n        if not link.startswith('http'):\n            link = self.endpoint + link\n        self.link = link\n        return link\n\n    def save(self, filename='tmp.jpg'):\n        response = requests.request(\"GET\", self.link)\n        with open(filename, mode='wb') as f:\n            f.write(response.content)\n\nif __name__ == '__main__':\n    api = posterapi('").concat(this.apiUrl,"', '").concat(this.token,"')\n    params = {}\n").concat(t,"\n    url = api.getUrl('").concat(this.posterId,"', params)\n    print(url)\n    api.save()");return e}}}),Si=Fi,Pi=(n("e1db"),Object(o["a"])(Si,Oi,ji,!1,null,"2ec95959",null)),Ii=Pi.exports,$i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticClass:"code language-go line-numbers",domProps:{innerHTML:t._s(t.html)}}),n("el-button",{ref:"btnCopy",staticStyle:{position:"absolute",top:"20px",right:"10px"},attrs:{type:"info"}},[t._v("复制")])],1)},Ei=[],Ui=(n("4de4"),n("1989"),{name:"FpCodeGo",mixins:[yi],computed:{html:function(){return Cn.a.highlight(this.code(),Cn.a.languages.go,"go")}},methods:{code:function(){var t={};this.items.filter((function(t){return t.vd})).forEach((function(e){t[e.vd]=e.v})),t["id"]=this.posterId,t=JSON.stringify(t,null,4);var e='package main\n\nimport (\n\t"fmt"\n\t"io/ioutil"\n\t"net/http"\n\t"strings"\n)\n\nfunc main() {\n\n\turl := "'.concat(this.apiUrl,'api/link"\n\tmethod := "POST"\n\n\tpayload := strings.NewReader(`').concat(t,'`)\n\n\tclient := &http.Client {\n\t}\n\treq, err := http.NewRequest(method, url, payload)\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\treq.Header.Add("Content-Type", "application/json")\n\treq.Header.Add("token", "').concat(this.token,'")\n\n\tres, err := client.Do(req)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\tdefer res.Body.Close()\n\n\tbody, err := ioutil.ReadAll(res.Body)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\tfmt.Println(string(body))\n}\n');return e}}}),Ti=Ui,Ai=(n("9108"),Object(o["a"])(Ti,$i,Ei,!1,null,"c112dc56",null)),zi=Ai.exports,Di=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticClass:"code language-shell line-numbers",domProps:{innerHTML:t._s(t.html)}}),n("el-button",{ref:"btnCopy",staticStyle:{position:"absolute",top:"20px",right:"10px"},attrs:{type:"info"}},[t._v("复制")])],1)},Ni=[],Li=(n("8009"),{name:"FpCodeCurl",mixins:[yi],computed:{html:function(){return Cn.a.highlight(this.code(),Cn.a.languages.bash,"bash")}},methods:{code:function(){var t={};this.items.filter((function(t){return t.vd})).forEach((function(e){t[e.vd]=e.v})),t["id"]=this.posterId,t=JSON.stringify(t,"","  ");var e="curl --location --request POST '".concat(this.apiUrl,"api/link' --header 'token: ").concat(this.token,"' --header 'Content-Type: application/json' \\\n--data-raw '").concat(t,"'");return e}}}),Ri=Li,Hi=(n("fefd"),Object(o["a"])(Ri,Di,Ni,!1,null,"eef3d0a6",null)),Bi=Hi.exports,Mi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticClass:"code language-php line-numbers",domProps:{innerHTML:t._s(t.html)}}),n("el-button",{ref:"btnCopy",staticStyle:{position:"absolute",top:"20px",right:"10px"},attrs:{type:"info"}},[t._v("复制")])],1)},qi=[],Ji=(n("6217"),n("8e9b"),{name:"FpCodePhp",mixins:[yi],computed:{html:function(){return Cn.a.highlight(this.code(),Cn.a.languages.php,"php")}},methods:{code:function(){var t={};this.items.filter((function(t){return t.vd})).forEach((function(e){t[e.vd]=e.v})),t["id"]=this.posterId,t=JSON.stringify(t,"","  ");var e="<?php\n\n# 设置参数\n$data = '".concat(t,"';\n\nfunction get_link($data)\n{\n    $curl = curl_init();\n    curl_setopt_array($curl, array(\n        CURLOPT_URL => '").concat(this.apiUrl,"api/link',\n        CURLOPT_RETURNTRANSFER => true,\n        CURLOPT_ENCODING => '',\n        CURLOPT_MAXREDIRS => 10,\n        CURLOPT_TIMEOUT => 0,\n        CURLOPT_FOLLOWLOCATION => true,\n        CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\n        CURLOPT_CUSTOMREQUEST => 'POST',\n        CURLOPT_HTTPHEADER => array('Content-Type: application/json', 'token: ").concat(this.token,"'),\n        CURLOPT_POSTFIELDS => $data,\n    ));\n    $json = curl_exec($curl);\n    curl_close($curl);\n    $r = json_decode($json, true);\n    return \"").concat(this.apiUrl,'" . $r["data"]["url"];;\n}\n\n# 获取连接\n$url = get_link($data);\necho "链接地址为: " . $url . "\\n";\n\nfunction down($url, $filename)\n{\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, $url);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n    $st = curl_exec($ch);   //将curl的结果存到变量里\n    $fd = fopen($filename, \'w\');\n    fwrite($fd, $st);  //将curl的结果写入文件里\n    fclose($fd);\n    curl_close($ch);\n}\n\n# 下载并且, 保存图片\ndown($url, "temp.png");\necho "图片保存完成\\n";\n');return e}}}),Wi=Ji,Ki=(n("3b04"),Object(o["a"])(Wi,Mi,qi,!1,null,"9ab2e476",null)),Xi=Ki.exports,Yi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticClass:"code language-javascript line-numbers",domProps:{innerHTML:t._s(t.html)}}),n("el-button",{ref:"btnCopy",staticStyle:{position:"absolute",top:"20px",right:"10px"},attrs:{type:"info"}},[t._v("复制")])],1)},Gi=[],Zi=(n("416b"),{name:"FpCodeJs",mixins:[yi],computed:{html:function(){return Cn.a.highlight(this.code(),Cn.a.languages.javascript,"javascript")}},methods:{code:function(){var t={};this.items.filter((function(t){return t.vd})).forEach((function(e){t[e.vd]=e.v})),t["id"]=this.posterId,t=JSON.stringify(t,"","  ");var e='// 复制后，粘贴在浏览器控制台即可运行\nvar myHeaders = new Headers();\nmyHeaders.append("Content-Type", "application/json");\nmyHeaders.append("token", "'.concat(this.token,'");\n\nvar raw = JSON.stringify(').concat(t,");\n\nvar requestOptions = {\n  method: 'POST',\n  headers: myHeaders,\n  body: raw,\n  redirect: 'follow'\n};\n\nfetch(\"").concat(this.apiUrl,"api/link\", requestOptions)\n  .then(response => response.json())\n  .then(result => console.log(result.data.url))\n  .catch(error => console.log('error', error));");return e}}}),Vi=Zi,Qi=(n("1eb3"),Object(o["a"])(Vi,Yi,Gi,!1,null,"387de2d4",null)),ta=Qi.exports,ea={name:"FpCodeContainer",components:{FpCodeJs:ta,FpCodeCurl:Bi,FpCodePhp:Xi,FpCodeGo:zi,FpCodePython:Ii,FpCodeJava:Ci},computed:Object(h["a"])({},Object(j["e"])({editor:function(t){return t.editor}})),data:function(){return{activeName:"cURL"}},methods:{}},na=ea,ia=Object(o["a"])(na,pi,di,!1,null,null,null),aa=ia.exports,sa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"修改密码",visible:t.editor.showChangePwd,width:"35%"},on:{"update:visible":function(e){return t.$set(t.editor,"showChangePwd",e)}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"原密码",prop:"password"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{"show-password":"",placeholder:"请输入原密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),n("el-form-item",{attrs:{label:"新密码",prop:"passwordNew"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{"show-password":"",placeholder:"请输入新密码"},model:{value:t.ruleForm.passwordNew,callback:function(e){t.$set(t.ruleForm,"passwordNew",e)},expression:"ruleForm.passwordNew"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")])],1)],1)],1)},oa=[],ra={name:"FpChangePwd",computed:Object(h["a"])({},Object(j["e"])({editor:function(t){return t.editor}})),data:function(){return{ruleForm:{password:"",passwordNew:""},rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:3,max:32,message:"长度在 3 到 32 个字符",trigger:"blur"}],passwordNew:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:3,max:32,message:"长度在 3 到 32 个字符",trigger:"blur"}]}}},methods:Object(h["a"])(Object(h["a"])({},Object(j["b"])({changepwd:"editor/changepwd"})),{},{submitForm:function(t){var e=this;return this.$refs[t].validate((function(t){t&&e.changepwd(e.ruleForm).then((function(t){e.$message.success("操作成功"),e.editor.showChangePwd=!1}))})),!1}})},ca=ra,la=Object(o["a"])(ca,sa,oa,!1,null,"99604cd0",null),ua=la.exports,pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"凭证管理",visible:t.editor.showTokenManager,width:"50%","custom-class":"token-manager-dialog"},on:{"update:visible":function(e){return t.$set(t.editor,"showTokenManager",e)}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[n("el-table-column",{attrs:{prop:"code",label:"令牌",width:"300"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),n("el-table-column",{attrs:{prop:"status",label:"启用"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:function(n){return t.updateToken(e.row)}},model:{value:e.row.status,callback:function(n){t.$set(e.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{on:{blur:function(n){return t.updateToken(e.row)}},model:{value:e.row.remark,callback:function(n){t.$set(e.row,"remark",n)},expression:"scope.row.remark"}})]}}])})],1)],1)},da=[],fa={name:"FpTokenManager",data:function(){return{list:[]}},watch:{"editor.showTokenManager":{handler:function(t){t&&this.query()}}},computed:Object(h["a"])({},Object(j["e"])({editor:function(t){return t.editor}})),methods:{query:function(){var t=this;Nt.queryTokenList().then((function(e){0===e.code&&(t.list=e.data.list)}))},updateToken:function(t){Nt.updateToken(t)}}},ma=fa,ha=(n("660e"),Object(o["a"])(ma,pa,da,!1,null,null,null)),va=ha.exports,ba=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"用户管理",visible:t.editor.showUserManager,width:"60%","custom-class":"user-manager-dialog"},on:{"update:visible":function(e){return t.$set(t.editor,"showUserManager",e)}}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.dataForm}},[n("el-form-item",[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},model:{value:t.dataForm.keyword,callback:function(e){t.$set(t.dataForm,"keyword",e)},expression:"dataForm.keyword"}})],1),n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"状态"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[n("el-option",{attrs:{label:"启用",value:1}}),n("el-option",{attrs:{label:"禁用",value:2}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")])],1),n("el-form-item",[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.editHandler({})}}},[t._v("新增")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,height:"450"}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),n("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150"}}),n("el-table-column",{attrs:{prop:"remark",label:"备注",width:"150"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),n("el-table-column",{attrs:{prop:"status",label:"启用"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:function(n){return t.update(e.row)}},model:{value:e.row.status,callback:function(n){t.$set(e.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{staticStyle:{"margin-right":"10px"},on:{click:function(n){return t.editHandler(e.row)}}},[t._v("编辑")]),n("el-tag",{attrs:{type:"danger"},on:{click:function(n){return t.deleteHandler(e.row)}}},[t._v("删除")])]}}])})],1),n("el-pagination",{staticStyle:{position:"absolute",bottom:"20px"},attrs:{"current-page":t.page,"page-sizes":[10,20,30,40],"page-size":t.limit,layout:"total, sizes, prev, pager, next",total:t.total},on:{"current-change":function(e){return t.query()},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e}}})],1),n("el-dialog",{attrs:{title:this.edit.title+"用户",visible:t.edit.show,width:"40%"},on:{"update:visible":function(e){return t.$set(t.edit,"show",e)}}},[n("el-form",{ref:"dataForm",attrs:{model:t.edit.dataForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},model:{value:t.edit.dataForm.username,callback:function(e){t.$set(t.edit.dataForm,"username",e)},expression:"edit.dataForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{"show-password":"",placeholder:"密码"},model:{value:t.edit.dataForm.password,callback:function(e){t.$set(t.edit.dataForm,"password",e)},expression:"edit.dataForm.password"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"备注"},model:{value:t.edit.dataForm.remark,callback:function(e){t.$set(t.edit.dataForm,"remark",e)},expression:"edit.dataForm.remark"}})],1),n("el-form-item",{attrs:{label:"状态",prop:"status"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"状态"},model:{value:t.edit.dataForm.status,callback:function(e){t.$set(t.edit.dataForm,"status",e)},expression:"edit.dataForm.status"}},[n("el-option",{attrs:{label:"启用",value:1}}),n("el-option",{attrs:{label:"禁用",value:2}})],1)],1),n("el-form-item",[n("el-button",{on:{click:function(e){t.edit.show=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmitHandle()}}},[t._v("确认")])],1)],1)],1)],1)},ga=[],wa={name:"FpUserManager",data:function(){return{list:[],page:1,limit:10,total:0,dataForm:{keyword:""},edit:{show:!1,title:"",dataForm:{id:"",username:"",password:"",remark:"",status:1}}}},watch:{"editor.showUserManager":{handler:function(t){t&&this.query()}}},computed:Object(h["a"])({},Object(j["e"])({editor:function(t){return t.editor}})),methods:{query:function(t){var e=this;Nt.http.get("api/admin/users",{params:Object(h["a"])(Object(h["a"])({},this.dataForm),{},{page:this.page,limit:this.limit})}).then((function(t){0===t.code&&(e.list=t.data.list,e.total=t.data.total)}))},update:function(t){var e=this;Nt.http.put("api/admin/users",t).then((function(t){0===t.code&&(e.$message.success("操作成功"),e.edit.show=!1,e.query())}))},editHandler:function(t){var e=this;this.edit.show=!0,t&&t.id?this.edit.title="编辑":this.edit.title="新增",this.$nextTick((function(){e.$refs["dataForm"].resetFields(),t.id&&Nt.http.get("api/admin/users/"+t.id).then((function(t){0===t.code&&(e.edit.dataForm=t.data.user)}))}))},deleteHandler:function(t){var e=this;this.$confirm("是否删除此[".concat(t.username,"]记录？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Nt.http.delete("api/admin/users/"+t.id).then((function(t){0===t.code&&(e.$message.success("操作成功"),e.query())}))}))},dataFormSubmitHandle:function(){var t=this,e=Object(h["a"])({},this.edit.dataForm);e.id?this.update(e):Nt.http.post("api/admin/users",e).then((function(e){0===e.code&&(t.$message.success("操作成功"),t.edit.show=!1,t.query())}))}}},ya=wa,xa=(n("d461"),Object(o["a"])(ya,ba,ga,!1,null,"26d826a8",null)),ka=xa.exports,_a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[n("div",{staticClass:"title",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandler.apply(null,arguments)}}},[n("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"搜索素材",size:"normal"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"list"},t._l(t.items2,(function(e){return n("div",{key:e.id,staticClass:"fp-img",attrs:{title:e.name},on:{click:function(n){return t.addItemToEditor(e)}}},[n("img",{attrs:{src:e.preview}})])})),0),n("fp-empty",{attrs:{data:t.items}})],1)])},Ca=[],Oa=(n("d81d"),n("841c"),{name:"FpAsideMaterial",components:{FpEmpty:Xn},data:function(){return{params:{name:""}}},computed:Object(h["a"])(Object(h["a"])({},Object(j["e"])({items:function(t){return t.panelmaterial.items},p:function(t){return t.poster.p}})),{},{items2:function(){return this.items.map((function(t){return{t:"image",name:t.filename,desc:"点击创建",v:t.path,preview:t.preview,w:200,uid:t.uid}}))}}),created:function(){this.searchHandler()},methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(j["b"])({search:"panelmaterial/search"})),Object(j["d"])({addItem:"poster/addItem",record:"snapshots/record"})),{},{addItemToEditor:function(t){this.addItem(t),this.record("新增素材: ".concat(t.name))},searchHandler:function(){this.search(Object(h["a"])({},this.params))}})}),ja=Oa,Fa=(n("13ca"),Object(o["a"])(ja,_a,Ca,!1,null,"1c476678",null)),Sa=Fa.exports,Pa={name:"FpDesign",components:{FpAsideMaterial:Sa,FpUserManager:ka,FpTokenManager:va,FpChangePwd:ua,FpCodeContainer:aa,FpAsidePanelPoster:ui,FpLogin:ai,FpAsidePanelLayer:Vn,FpAsidePanelComponent:Rn,FpDebugPanel:Sn,FpSettingContainer:yn,FpMainContainer:Ie,FpAsideExtend:tt,FpAside:X,FpHeader:z},computed:Object(h["a"])({},Object(j["e"])({activeId:function(t){return t.aside.activeId}}))},Ia=Pa,$a=(n("f65d"),n("31bf"),Object(o["a"])(Ia,f,m,!1,null,"1bdd3be1",null)),Ea=$a.exports,Ua={name:"Home",components:{FpDesign:Ea}},Ta=Ua,Aa=(n("972d"),Object(o["a"])(Ta,p,d,!1,null,"1bb0581b",null)),za=Aa.exports;i["default"].use(u["a"]);var Da=[{path:"/",name:"Home",component:za},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"*",name:"HomePattern",component:za}],Na=new u["a"]({mode:"history",routes:Da}),La=Na,Ra={items:[],activeId:0},Ha={isActived:function(){return 0!==Ra.activeId}},Ba={getItems:function(t){var e=t.commit;Nt.loadAsideItems((function(t){e("set_items",t)}))},setActiveItem:function(t,e){var n=t.commit;n("set_active_id",e)},openPoster:function(t){var e=t.commit;e("set_active_id",{id:5,activated:!0})}},Ma={set_items:function(t,e){t.items=e,t.items.filter((function(t){return t.activated})).forEach((function(e){return t.activeId=e.id}))},set_active_id:function(t,e){var n=e.id,i=e.activated;e.extend;t.activeId!==n||i?(t.activeId=n,t.items.filter((function(t){return t.id!==n})).forEach((function(t){return t.activated=!1})),t.items.filter((function(t){return t.id===n})).forEach((function(t){return t.activated=!0}))):t.activeId=0}},qa={namespaced:!0,state:Ra,getters:Ha,actions:Ba,mutations:Ma};n("a15b");function Ja(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=arguments.length>1?arguments[1]:void 0,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(i=i||a.length,n)for(t=0;t<n;t++)s[t]=a[0|Math.random()*i];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",t=0;t<36;t++)s[t]||(e=0|16*Math.random(),s[t]=a[19===t?3&e|8:e]);return s.join("")}var Wa={name:"未命名",id:0,w:750,h:1333,use:"bgUrl",bgc:"#fafbfc",bgUrl:"",type:"jpeg",quality:80,scale:.5,items:[]},Ka={p:Object(h["a"])({},Wa)},Xa={w:function(){return Ka.p.w},h:function(){return Ka.p.h},ai:function(){var t=Ka.p.items.filter((function(t){return t.active}));return t.length>=1?t[0]:void 0},maxZ:function(){return Ka.p.items.length>=1?Object(_t["max"])(Ka.p.items.map((function(t){return t.z}))):1},scale:function(){return Ka.p.scale}},Ya={createPoster:function(t){var e=t.commit,n=JSON.parse(JSON.stringify(Wa));e("loadPoster",n)},savePoster:function(){return new Promise((function(t){var e=Ka.p,n=Object(h["a"])({},e);0===e.id?Nt.savePoster(n,(function(n){0===n.code&&n.data.poster&&(e.id=n.data.poster.id,e.code=n.data.poster.code),t(n)})):Nt.updatePoster(n,(function(e){t(e)}))}))},loadPoster:function(t,e){var n=t.commit;return new Promise((function(t){Nt.loadPoster(e,(function(i){var a=i.data.poster,s=JSON.parse(a.json);s.id=e,n("loadPoster",s),s.items.filter((function(t){return""!==t.fn})).forEach((function(t){return Nt.loadfont(t.fn)})),t(i)}))}))},copyPoster:function(t,e){t.commit;return new Promise((function(t){Nt.copyPoster(e,(function(e){t(e)}))}))},removePoster:function(t,e){t.commit;return new Promise((function(t){Nt.removePoster(e,(function(e){t(e)}))}))},previewPoster:function(){return new Promise((function(t){var e=Ka.p;Nt.previewPoster(e,(function(e){t(e)}))}))},shrink:function(t){var e=t.commit;e("changeScale",-.1)},magnify:function(t){var e=t.commit;e("changeScale",.1)}},Ga={changeScale:function(t,e){if(t.p.scale<=.35&&(e/=10),t.p.scale<=.05&&e<0||t.p.scale>=3&&e>0)console.warn("已到极致缩放比: ",t.p.scale);else{var n=t.p.scale+e;.36===n&&(n=.4),t.p.scale=Number(n.toFixed(2))}},loadPoster:function(t,e){var n=0;e.items.forEach((function(t){t.active=!1,"undefined"===typeof t.lock&&(t.lock=!1),"text"===t.t&&("undefined"===typeof t.a&&(t.a="left"),"undefined"===typeof t.wrap&&(t.wrap=!1)),t.z=++n})),"undefined"!==typeof e.editor&&delete e["editor"],"undefined"===typeof e.use&&(e.use=e.bgUrl?"bgUrl":"bgc"),e.scale||(e.scale=.5),t.p=e},setActiveItemId:function(t,e){t.p.items.filter((function(t){return t.uuid!==e})).forEach((function(t){return t.active=!1})),t.p.items.filter((function(t){return t.uuid===e})).forEach((function(t){return t.active=!0}))},setUnActiveItemId:function(t,e){t.p.items.filter((function(t){return t.uuid===e})).forEach((function(t){return t.active=!1}))},setUnActiveAllItem:function(t){t.p.items.forEach((function(t){return t.active=!1}))},addItem:function(t,e){if(t.p.items.length>=100)console.warn("元素超过最数量: ",t.p.items.length);else{this.commit("poster/setUnActiveAllItem");var n=t.p.items.length>=1?Xa.maxZ()+1:1,i={t:e.t,name:e.name,uuid:Ja(),x:e.x?e.x:100,y:e.y?e.y:100,w:e.w?e.w:200,h:e.h?e.h:200,z:n,s:e.s?e.s:30,c:e.c?e.c:"#000000",bgc:e.bgc?e.bgc:"",v:e.v,vd:e.vd?e.vd:"",fn:e.fn?e.fn:"",st:e.st?e.st:0,active:!0,lock:!1};"undefined"!==typeof e.p&&(i["p"]=e.p),"text"===e.t&&(i.a=e.a?e.a:"left",i.wrap=!!e.wrap&&e.wrap),t.p.items.push(i)}},removeActiveItem:function(t){var e=t.p.items.filter((function(t){return!t.active})),n=0;e.forEach((function(t){t.z=++n})),t.p.items=e},copyActiveItem:function(t,e){var n=JSON.parse(JSON.stringify(e));n.y+=20,this.commit("poster/addItem",n)},changePosterSize:function(t,e){var n=e.w,i=e.h;t.p.w=n,t.p.h=i},top:function(t,e){var n=Xa.maxZ();t.p.items.filter((function(t){return t.z>e.z})).forEach((function(t){return t.z--})),e.z=n,t.p.items=Object(_t["sortBy"])(t.p.items,["z"])},bottom:function(t,e){t.p.items.filter((function(t){return t.z<e.z})).forEach((function(t){return t.z++})),e.z=1,t.p.items=Object(_t["sortBy"])(t.p.items,["z"])},up:function(t,e){var n=Xa.maxZ();e.z!==n&&(t.p.items.filter((function(t){return t.z===e.z+1})).forEach((function(t){return t.z--})),e.z=e.z+1,t.p.items=Object(_t["sortBy"])(t.p.items,["z"]))},down:function(t,e){e.z<=1||(t.p.items.filter((function(t){return t.z===e.z-1})).forEach((function(t){return t.z++})),e.z=e.z-1,t.p.items=Object(_t["sortBy"])(t.p.items,["z"]))}},Za={namespaced:!0,state:Ka,getters:Xa,actions:Ya,mutations:Ga},Va=(n("fb6a"),{snapshots:[],snapshots2:[],index:-1,maxIndex:100}),Qa={canUndo:function(){return Va.index>0},canRedo:function(){return Va.index<Va.snapshots.length-1}},ts={},es={clear:function(t){t.snapshots=[],t.snapshots2=[],t.index=-1},record:function(t,e){var n=t.snapshots2[t.index],i=JSON.stringify(Za.state.p);n!==i?(t.index++,console.info("record state.index=",t.index,"name=",e),t.snapshots[t.index]=e,t.snapshots2[t.index]=JSON.stringify(Za.state.p),t.index<t.snapshots.length-1&&(t.snapshots=t.snapshots.slice(0,t.index+1),t.snapshots2=t.snapshots2.slice(0,t.index+1))):console.warn("no any change to record!")},undo:function(t){t.index>0&&(t.index--,i["default"].set(Za.state,"p",JSON.parse(t.snapshots2[t.index])))},redo:function(t){t.index<t.snapshots.length-1&&(t.index++,i["default"].set(Za.state,"p",JSON.parse(t.snapshots2[t.index])))}},ns={namespaced:!0,state:Va,getters:Qa,actions:ts,mutations:es},is={items:[]},as={},ss={getItems:function(t){var e=t.commit;return new Promise((function(t){Nt.loadPosters((function(n){var i=n.data.posters;i.forEach((function(t){t.preview=t.preview.startsWith("http")?t.preview:Nt.baseURL+t.preview})),e("setItems",i),t(i)}))}))}},os={setItems:function(t,e){t.items=e}},rs={namespaced:!0,state:is,getters:as,actions:ss,mutations:os},cs={items:[]},ls={},us={search:function(t,e){var n=t.commit;return console.info(e),new Promise((function(t){Nt.loadMaterial(e,(function(e){var i=e.data.items;i.forEach((function(t){t.preview=t.path.startsWith("http")?t.path:Nt.baseURL+t.path})),n("setItems",i),t(e)}))}))}},ps={setItems:function(t,e){t.items=e}},ds={namespaced:!0,state:cs,getters:ls,actions:us,mutations:ps},fs={aside:qa,poster:Za,editor:St,snapshots:ns,panelposter:rs,panelmaterial:ds};i["default"].use(j["a"]);var ms=new j["a"].Store({state:{},mutations:{},actions:{},modules:Object(h["a"])({},fs)}),hs=(n("f689"),n("472a"),n("0808"),n("6944")),vs=n.n(hs);i["default"].use(vs.a),i["default"].use(It.a,{size:"small"}),i["default"].config.productionTip=!1,new i["default"]({router:La,store:ms,render:function(t){return t(l)}}).$mount("#app")},"5f36":function(t,e,n){},"660e":function(t,e,n){"use strict";n("9dd8")},"67da":function(t,e,n){"use strict";n("4fbb")},7316:function(t,e,n){"use strict";n("2fca")},7791:function(t,e,n){},"79b1":function(t,e,n){"use strict";n("fd28")},"7ad2":function(t,e,n){},"80ea":function(t,e,n){"use strict";n("1826")},"888c":function(t,e,n){"use strict";n("bc89")},8966:function(t,e,n){},"8a15":function(t,e,n){"use strict";n("5f36")},"8a86":function(t,e,n){},"8b10":function(t,e,n){"use strict";n("37e3")},9108:function(t,e,n){"use strict";n("b85f")},"92c7":function(t,e,n){},"972d":function(t,e,n){"use strict";n("a627")},"9bd0":function(t,e,n){},"9c7c":function(t,e,n){},"9dd8":function(t,e,n){},a627:function(t,e,n){},a62c:function(t,e,n){},ab8b:function(t,e,n){"use strict";n("cff1")},acbe:function(t,e,n){"use strict";n("f18f")},afb8:function(t,e,n){"use strict";n("340f")},b14c:function(t,e,n){"use strict";n("a62c")},b46f:function(t,e,n){},b85f:function(t,e,n){},bc89:function(t,e,n){},bcbd:function(t,e,n){},bd1b:function(t,e,n){"use strict";n("8a86")},bfe1:function(t,e,n){"use strict";n("e636")},bff9:function(t,e,n){},c99f:function(t,e,n){"use strict";n("9c7c")},cff1:function(t,e,n){},d461:function(t,e,n){"use strict";n("92c7")},d4a4:function(t,e,n){"use strict";n("7791")},da01:function(t,e,n){"use strict";n("bcbd")},e1db:function(t,e,n){"use strict";n("55ad")},e54d:function(t,e,n){"use strict";n("b46f")},e636:function(t,e,n){},e72f:function(t,e,n){"use strict";n("fdee")},eb43:function(t,e,n){"use strict";n("8966")},eece:function(t,e,n){"use strict";n("089c")},f18f:function(t,e,n){},f65d:function(t,e,n){"use strict";n("2a51")},f689:function(t,e,n){},f936:function(t,e,n){"use strict";n("5109")},fccf:function(t,e,n){},fd28:function(t,e,n){},fdee:function(t,e,n){},fefd:function(t,e,n){"use strict";n("7ad2")}});